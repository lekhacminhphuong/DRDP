{"ast":null,"code":"var _jsxFileName = \"/Users/phuongle/Documents/Internship/Klavins Lab/project-dashboard/src/views/Calendar/index.js\";\nimport React, { useState, useRef, useEffect } from 'react';\nimport moment from 'moment';\nimport FullCalendar from '@fullcalendar/react';\nimport dayGridPlugin from '@fullcalendar/daygrid';\nimport timeGridPlugin from '@fullcalendar/timegrid';\nimport interactionPlugin from '@fullcalendar/interaction';\nimport listPlugin from '@fullcalendar/list';\nimport timelinePlugin from '@fullcalendar/timeline';\nimport { makeStyles } from '@material-ui/styles';\nimport { Container, Modal, Card, CardContent, colors, useTheme, useMediaQuery } from '@material-ui/core';\nimport '@fullcalendar/core/main.css';\nimport '@fullcalendar/daygrid/main.css';\nimport '@fullcalendar/timegrid/main.css';\nimport '@fullcalendar/list/main.css';\nimport axios from 'src/utils/axios';\nimport Page from 'src/components/Page';\nimport AddEditEvent from './AddEditEvent';\nimport Toolbar from './Toolbar';\nconst useStyles = makeStyles(theme => ({\n  root: {\n    paddingTop: theme.spacing(3),\n    paddingBottom: theme.spacing(3),\n    '& .fc-unthemed td': {\n      borderColor: theme.palette.divider\n    },\n    '& .fc-widget-header': {\n      backgroundColor: colors.grey[50]\n    },\n    '& .fc-axis': { ...theme.typography.body2\n    },\n    '& .fc-list-item-time': { ...theme.typography.body2\n    },\n    '& .fc-list-item-title': { ...theme.typography.body1\n    },\n    '& .fc-list-heading-main': { ...theme.typography.h6\n    },\n    '& .fc-list-heading-alt': { ...theme.typography.h6\n    },\n    '& .fc th': {\n      borderColor: theme.palette.divider\n    },\n    '& .fc-day-header': { ...theme.typography.subtitle2,\n      fontWeight: 500,\n      color: theme.palette.text.secondary,\n      padding: theme.spacing(1),\n      backgroundColor: colors.grey[50]\n    },\n    '& .fc-day-top': { ...theme.typography.body2\n    },\n    '& .fc-highlight': {\n      backgroundColor: colors.blueGrey[50]\n    },\n    '& .fc-event': {\n      backgroundColor: theme.palette.primary.main,\n      color: theme.palette.primary.contrastText,\n      borderWidth: 2,\n      opacity: 0.9,\n      '& .fc-time': { ...theme.typography.h6,\n        color: 'inherit'\n      },\n      '& .fc-title': { ...theme.typography.body1,\n        color: 'inherit'\n      }\n    },\n    '& .fc-list-empty': { ...theme.typography.subtitle1\n    }\n  },\n  card: {\n    marginTop: theme.spacing(3)\n  }\n}));\n\nfunction Calendar() {\n  const classes = useStyles();\n  const calendarRef = useRef(null);\n  const theme = useTheme();\n  const mobileDevice = useMediaQuery(theme.breakpoints.down('sm'));\n  const [view, setView] = useState(mobileDevice ? 'listWeek' : 'dayGridMonth');\n  const [date, setDate] = useState(moment('2019-07-30 08:00:00').toDate());\n  const [events, setEvents] = useState([]);\n  const [eventModal, setEventModal] = useState({\n    open: false,\n    event: null\n  });\n\n  const handleEventClick = info => {\n    const selected = events.find(event => event.id === info.event.id);\n    setEventModal({\n      open: true,\n      event: selected\n    });\n  };\n\n  const handleEventNew = () => {\n    setEventModal({\n      open: true,\n      event: null\n    });\n  };\n\n  const handleEventDelete = event => {\n    setEvents(currentEvents => currentEvents.filter(e => e.id !== event.id));\n    setEventModal({\n      open: false,\n      event: null\n    });\n  };\n\n  const handleModalClose = () => {\n    setEventModal({\n      open: false,\n      event: null\n    });\n  };\n\n  const handleEventAdd = event => {\n    setEvents(currentEvents => [...currentEvents, event]);\n    setEventModal({\n      open: false,\n      event: null\n    });\n  };\n\n  const handleEventEdit = event => {\n    setEvents(currentEvents => currentEvents.map(e => e.id === event.id ? event : e));\n    setEventModal({\n      open: false,\n      event: null\n    });\n  };\n\n  const handleDateToday = () => {\n    const calendarApi = calendarRef.current.getApi();\n    calendarApi.today();\n    setDate(calendarApi.getDate());\n  };\n\n  const handleViewChange = newView => {\n    const calendarApi = calendarRef.current.getApi();\n    calendarApi.changeView(newView);\n    setView(newView);\n  };\n\n  const handleDatePrev = () => {\n    const calendarApi = calendarRef.current.getApi();\n    calendarApi.prev();\n    setDate(calendarApi.getDate());\n  };\n\n  const handleDateNext = () => {\n    const calendarApi = calendarRef.current.getApi();\n    calendarApi.next();\n    setDate(calendarApi.getDate());\n  };\n\n  useEffect(() => {\n    let mounted = true;\n\n    const fetchEvents = () => {\n      if (mounted) {\n        axios.get('/api/calendar').then(response => setEvents(response.data.events));\n      }\n    };\n\n    fetchEvents();\n    return () => {\n      mounted = false;\n    };\n  }, []);\n  useEffect(() => {\n    const calendarApi = calendarRef.current.getApi();\n    const newView = mobileDevice ? 'listWeek' : 'dayGridMonth';\n    calendarApi.changeView(newView);\n    setView(newView);\n  }, [mobileDevice]);\n  return /*#__PURE__*/React.createElement(Page, {\n    className: classes.root,\n    title: \"Calendar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    maxWidth: false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Toolbar, {\n    date: date,\n    onDateNext: handleDateNext,\n    onDatePrev: handleDatePrev,\n    onDateToday: handleDateToday,\n    onEventAdd: handleEventNew,\n    onViewChange: handleViewChange,\n    view: view,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Card, {\n    className: classes.card,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(FullCalendar, {\n    allDayMaintainDuration: true,\n    defaultDate: date,\n    defaultView: view,\n    droppable: true,\n    editable: true,\n    eventClick: handleEventClick,\n    eventResizableFromStart: true,\n    events: events,\n    header: false,\n    height: 800,\n    plugins: [dayGridPlugin, timeGridPlugin, interactionPlugin, listPlugin, timelinePlugin],\n    ref: calendarRef,\n    rerenderDelay: 10,\n    selectable: true,\n    weekends: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(Modal, {\n    onClose: handleModalClose,\n    open: eventModal.open,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(AddEditEvent, {\n    event: eventModal.event,\n    onAdd: handleEventAdd,\n    onCancel: handleModalClose,\n    onDelete: handleEventDelete,\n    onEdit: handleEventEdit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 11\n    }\n  }))));\n}\n\nexport default Calendar;","map":{"version":3,"sources":["/Users/phuongle/Documents/Internship/Klavins Lab/project-dashboard/src/views/Calendar/index.js"],"names":["React","useState","useRef","useEffect","moment","FullCalendar","dayGridPlugin","timeGridPlugin","interactionPlugin","listPlugin","timelinePlugin","makeStyles","Container","Modal","Card","CardContent","colors","useTheme","useMediaQuery","axios","Page","AddEditEvent","Toolbar","useStyles","theme","root","paddingTop","spacing","paddingBottom","borderColor","palette","divider","backgroundColor","grey","typography","body2","body1","h6","subtitle2","fontWeight","color","text","secondary","padding","blueGrey","primary","main","contrastText","borderWidth","opacity","subtitle1","card","marginTop","Calendar","classes","calendarRef","mobileDevice","breakpoints","down","view","setView","date","setDate","toDate","events","setEvents","eventModal","setEventModal","open","event","handleEventClick","info","selected","find","id","handleEventNew","handleEventDelete","currentEvents","filter","e","handleModalClose","handleEventAdd","handleEventEdit","map","handleDateToday","calendarApi","current","getApi","today","getDate","handleViewChange","newView","changeView","handleDatePrev","prev","handleDateNext","next","mounted","fetchEvents","get","then","response","data"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport moment from 'moment';\nimport FullCalendar from '@fullcalendar/react';\nimport dayGridPlugin from '@fullcalendar/daygrid';\nimport timeGridPlugin from '@fullcalendar/timegrid';\nimport interactionPlugin from '@fullcalendar/interaction';\nimport listPlugin from '@fullcalendar/list';\nimport timelinePlugin from '@fullcalendar/timeline';\nimport { makeStyles } from '@material-ui/styles';\nimport {\n  Container,\n  Modal,\n  Card,\n  CardContent,\n  colors,\n  useTheme,\n  useMediaQuery\n} from '@material-ui/core';\nimport '@fullcalendar/core/main.css';\nimport '@fullcalendar/daygrid/main.css';\nimport '@fullcalendar/timegrid/main.css';\nimport '@fullcalendar/list/main.css';\nimport axios from 'src/utils/axios';\nimport Page from 'src/components/Page';\nimport AddEditEvent from './AddEditEvent';\nimport Toolbar from './Toolbar';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    paddingTop: theme.spacing(3),\n    paddingBottom: theme.spacing(3),\n    '& .fc-unthemed td': {\n      borderColor: theme.palette.divider\n    },\n    '& .fc-widget-header': {\n      backgroundColor: colors.grey[50]\n    },\n    '& .fc-axis': {\n      ...theme.typography.body2\n    },\n    '& .fc-list-item-time': {\n      ...theme.typography.body2\n    },\n    '& .fc-list-item-title': {\n      ...theme.typography.body1\n    },\n    '& .fc-list-heading-main': {\n      ...theme.typography.h6\n    },\n    '& .fc-list-heading-alt': {\n      ...theme.typography.h6\n    },\n    '& .fc th': {\n      borderColor: theme.palette.divider\n    },\n    '& .fc-day-header': {\n      ...theme.typography.subtitle2,\n      fontWeight: 500,\n      color: theme.palette.text.secondary,\n      padding: theme.spacing(1),\n      backgroundColor: colors.grey[50]\n    },\n    '& .fc-day-top': {\n      ...theme.typography.body2\n    },\n    '& .fc-highlight': {\n      backgroundColor: colors.blueGrey[50]\n    },\n    '& .fc-event': {\n      backgroundColor: theme.palette.primary.main,\n      color: theme.palette.primary.contrastText,\n      borderWidth: 2,\n      opacity: 0.9,\n      '& .fc-time': {\n        ...theme.typography.h6,\n        color: 'inherit'\n      },\n      '& .fc-title': {\n        ...theme.typography.body1,\n        color: 'inherit'\n      }\n    },\n    '& .fc-list-empty': {\n      ...theme.typography.subtitle1\n    }\n  },\n  card: {\n    marginTop: theme.spacing(3)\n  }\n}));\n\nfunction Calendar() {\n  const classes = useStyles();\n  const calendarRef = useRef(null);\n  const theme = useTheme();\n  const mobileDevice = useMediaQuery(theme.breakpoints.down('sm'));\n  const [view, setView] = useState(mobileDevice ? 'listWeek' : 'dayGridMonth');\n  const [date, setDate] = useState(moment('2019-07-30 08:00:00').toDate());\n  const [events, setEvents] = useState([]);\n  const [eventModal, setEventModal] = useState({\n    open: false,\n    event: null\n  });\n\n  const handleEventClick = (info) => {\n    const selected = events.find((event) => event.id === info.event.id);\n\n    setEventModal({\n      open: true,\n      event: selected\n    });\n  };\n\n  const handleEventNew = () => {\n    setEventModal({\n      open: true,\n      event: null\n    });\n  };\n\n  const handleEventDelete = (event) => {\n    setEvents((currentEvents) => currentEvents.filter((e) => e.id !== event.id));\n    setEventModal({\n      open: false,\n      event: null\n    });\n  };\n\n  const handleModalClose = () => {\n    setEventModal({\n      open: false,\n      event: null\n    });\n  };\n\n  const handleEventAdd = (event) => {\n    setEvents((currentEvents) => [...currentEvents, event]);\n    setEventModal({\n      open: false,\n      event: null\n    });\n  };\n\n  const handleEventEdit = (event) => {\n    setEvents((currentEvents) => currentEvents.map((e) => (e.id === event.id ? event : e)));\n    setEventModal({\n      open: false,\n      event: null\n    });\n  };\n\n  const handleDateToday = () => {\n    const calendarApi = calendarRef.current.getApi();\n\n    calendarApi.today();\n    setDate(calendarApi.getDate());\n  };\n\n  const handleViewChange = (newView) => {\n    const calendarApi = calendarRef.current.getApi();\n\n    calendarApi.changeView(newView);\n    setView(newView);\n  };\n\n  const handleDatePrev = () => {\n    const calendarApi = calendarRef.current.getApi();\n\n    calendarApi.prev();\n    setDate(calendarApi.getDate());\n  };\n\n  const handleDateNext = () => {\n    const calendarApi = calendarRef.current.getApi();\n\n    calendarApi.next();\n    setDate(calendarApi.getDate());\n  };\n\n  useEffect(() => {\n    let mounted = true;\n\n    const fetchEvents = () => {\n      if (mounted) {\n        axios\n          .get('/api/calendar')\n          .then((response) => setEvents(response.data.events));\n      }\n    };\n\n    fetchEvents();\n\n    return () => {\n      mounted = false;\n    };\n  }, []);\n\n  useEffect(() => {\n    const calendarApi = calendarRef.current.getApi();\n    const newView = mobileDevice ? 'listWeek' : 'dayGridMonth';\n\n    calendarApi.changeView(newView);\n    setView(newView);\n  }, [mobileDevice]);\n\n  return (\n    <Page\n      className={classes.root}\n      title=\"Calendar\"\n    >\n      <Container maxWidth={false}>\n        <Toolbar\n          date={date}\n          onDateNext={handleDateNext}\n          onDatePrev={handleDatePrev}\n          onDateToday={handleDateToday}\n          onEventAdd={handleEventNew}\n          onViewChange={handleViewChange}\n          view={view}\n        />\n        <Card className={classes.card}>\n          <CardContent>\n            <FullCalendar\n              allDayMaintainDuration\n              defaultDate={date}\n              defaultView={view}\n              droppable\n              editable\n              eventClick={handleEventClick}\n              eventResizableFromStart\n              events={events}\n              header={false}\n              height={800}\n              plugins={[\n                dayGridPlugin,\n                timeGridPlugin,\n                interactionPlugin,\n                listPlugin,\n                timelinePlugin\n              ]}\n              ref={calendarRef}\n              rerenderDelay={10}\n              selectable\n              weekends\n            />\n          </CardContent>\n        </Card>\n        <Modal\n          onClose={handleModalClose}\n          open={eventModal.open}\n        >\n          <AddEditEvent\n            event={eventModal.event}\n            onAdd={handleEventAdd}\n            onCancel={handleModalClose}\n            onDelete={handleEventDelete}\n            onEdit={handleEventEdit}\n          />\n        </Modal>\n      </Container>\n    </Page>\n  );\n}\n\nexport default Calendar;\n"]},"metadata":{},"sourceType":"module"}